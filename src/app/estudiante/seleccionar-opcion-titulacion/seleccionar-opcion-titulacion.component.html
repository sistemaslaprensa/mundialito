<app-encabezado [nivel1]="txt_nivel1" [nivel2]="txt_nivel2" [nivel3]="txt_nivel3" [titulo]="txt_titulo"
    [subtitulo]="txt_subtitulo">
</app-encabezado>

<div class="content__boxed">    
    <div class="content__wrap">
        <!-- Aqui Inicia el Cuerpo -->
        <div class="card">
            <div class="card-header">
                <div class="content__boxed">
                    <div class="content__wrap">
                        <div class="card">
                            <div class="card-body">                            
                                
                                <mat-horizontal-stepper #stepper [selectedIndex]="poseeOpcion ? 3 : stepper.selectedIndex">
                                    <mat-step [stepControl]="firstFormGroup" label="Base Legal" >
                                        <form [formGroup]="paso1">

                                            <span>Lea detenidamente la base legal que contempla la normativa, requisitos y procedimientos para iniciar el proceso de titulación</span>

                                            <ul class="bullet-list separar">
                                                <li><span><a href="">Reglamento para el proceso de titulación</a></span></li>
                                                <li><span><a href="">Acuerdos y compromisos</a></span></li>
                                                <li><span><a href="">Requisitos</a></span></li>
                                              </ul>
                                     
                                           <div class="form-check form-check-inline">
                                            <input type="checkbox" class="hand form-check-input" id="termsCheckbox" [(ngModel)]="aceptarAcuerdos" (click)="handleChange()">
                                            <label class="hand form-check-label" for="termsCheckbox">Acepto los términos y acuerdos</label>
                                          </div>                                                 

                                            <!-- En el HTML -->
                                            <div class="d-flex justify-content-end">
                                                <button type="button" class="btn btn-primary" matStepperNext [disabled]="!aceptarAcuerdos">Siguiente</button>
                                            </div>
                                        </form>                                      
                                    </mat-step>

                                    <mat-step [stepControl]="secondFormGroup" label="Requisitos">
                                      <form [formGroup]="paso2">
                                        <div class="card-body">
                                            <div class="table-responsove">
                                                <table class="table table-striped">
                                                    <thead>
                                                        <tr>
                                                            <th class="text-center">Requisito</th>
                                                            <th>Estado</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>Se encuentra legalmente matrículado en en nivel de selección </td>
                                                            <td class="fs-5">
                                                                <div [ngClass]="{'bg-success': cumpleNivelSeleccion, 'bg-danger': !cumpleNivelSeleccion}" class="badge d-block">
                                                                  {{ cumpleNivelSeleccion ? 'Cumple' : 'No cumple' }}
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>                                                               
                                                            <td>No posee opción de titulación seleccionada anteriormente</td>
                                                            <td class="fs-5">
                                                                <div [ngClass]="{'bg-success': !poseeOpcion, 'bg-danger': poseeOpcion}" class="badge d-block">
                                                                  {{ !poseeOpcion ? 'Cumple' : 'No cumple' }}
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>No posee matrículas en la unidad de titulación</td>
                                                            <td class="fs-5">
                                                                <div [ngClass]="{'bg-success': !poseeMatricula, 'bg-danger': poseeMatricula}" class="badge d-block">
                                                                  {{ !poseeMatricula ? 'Cumple' : 'No cumple' }}
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between mt-3">
                                            <button type="button" class="btn btn-danger" matStepperPrevious>Regresar</button> 
                                            <button type="button" class="btn btn-primary" matStepperNext [disabled]="!cumpleTodosLosRequisitos">Continuar</button>
                                        </div>
                                      </form>
                                    </mat-step>

                                    <mat-step [stepControl]="tresFormGroup" label="Opción de titulación">
                                        <span>Seleccione una opción de titulación</span>
                                        <form [formGroup]="paso3">
                                            <mat-radio-group formControlName="option">
                                                <ul *ngFor="let opcion of vOpcionesTitulacionCarrera" class="hand">
                                                    <mat-radio-button 
                                                        (change)="handleRadioChange($event)"                                             
                                                        [value]="opcion.idConfiguracionTitulacion"
                                                     >{{ opcion.nombre }}                                                    
                                                    </mat-radio-button>
                                                </ul>
                                              </mat-radio-group>                                          
                                              <div class="d-flex justify-content-between mt-3">
                                                <button type="button" class="btn btn-light" matStepperPrevious>Regresar</button>
                                                <button type="button" class="btn btn-primary" 
                                                (click)="GuardarOpcionTitulacionEstudiante()" [disabled]="!seleccionOpcion">Guardar y continuar</button>
                                              </div>
                                        </form>
                                      </mat-step>

                                    <mat-step label="Resumen">
                                        <form [formGroup]="paso4">
                                            <h2 class="subtitulo" >Resumen</h2>
                                            <span class="subtitulo">Opción de titulación (seleccionado)</span>  
                                            <ng-template #mostrarOpcion>
                                                <!-- Contenido a mostrar si ya tiene selección -->
                                                {{ GetOpcionTitulacionEstudiante() }}
                                                <input type="text" class="form-control" value={{seleccionEstudiante?.nombre}} disabled>                                    
                                            </ng-template>
                                                                        
                                            <!-- Tabla informativa -->
                                            <div class="table-responsive">
                                                <!-- <table class="table table-striped"> -->
                                                  
                                                <table class="mat-elevation-z3 table table-striped-columns" aria-disabled="true">
                                                    <thead>
                                                        <tr>
                                                            <th>Opcion de titulación</th>
                                                            <th>Estado</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>{{seleccionEstudiante?.nombre}}</td>
                                                            <td>{{seleccionEstudiante?.estado}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                           
                                        </form>
                                      <div>                                        
                                      </div>
                                    </mat-step>
                                </mat-horizontal-stepper>                               
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Aqui termina el Cuerpo -->
</div>